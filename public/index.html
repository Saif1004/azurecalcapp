<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Azure Calculator</title>
  <style>
    body { font-family: system-ui, Arial; margin: 40px; max-width: 520px; }
    input, select, button { padding: 10px; font-size: 16px; margin: 6px 0; width: 100%; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .result { margin-top: 14px; padding: 12px; border: 1px solid #ddd; }
  </style>
</head>
<body>
  <h1>Cloud Calculator (Azure)</h1>

  <div class="row">
    <input id="a" type="number" placeholder="First number" />
    <input id="b" type="number" placeholder="Second number" />
  </div>

  <select id="op">
    <option value="+">Add (+)</option>
    <option value="-">Subtract (-)</option>
    <option value="*">Multiply (*)</option>
    <option value="/">Divide (/)</option>
  </select>

  <button id="btn">Calculate</button>

  <div class="result" id="out">Result will appear here.</div>

  <script>
    const out = document.getElementById("out");
    document.getElementById("btn").addEventListener("click", async () => {
      const a = document.getElementById("a").value;
      const b = document.getElementById("b").value;
      const op = document.getElementById("op").value;

      out.textContent = "Calculating...";

      try {
        const r = await fetch("/api/calc", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ a, b, op })
        });

        const data = await r.json();
        if (!r.ok) throw new Error(data.error || "Request failed");

        out.textContent = `${data.a} ${data.op} ${data.b} = ${data.result}`;
      } catch (e) {
        out.textContent = `Error: ${e.message}`;
      }
    });
  </script>
</body>
</html>
